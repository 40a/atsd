## Overview

Network commands provide a simple interface for inserting time series data, properties, and messages into Axibase Time-Series Database (ATSD) server.

You can use telnet, netcat or any programming language that lets you connect to remote systems via TCP/IP to send data into ATSD.

### Sending a single command

```
echo series e:{entity} m:{metric}={value} | nc atsd_server 8081
```

```
printf 'series e:{entity} m:{metric}={value}' | nc atsd_server 8081
```

> Request

```
echo series e:DL1866 m:speed=650 m:altitude=12300 | nc atsd_server 8081
```

```
printf 'series e:DL1866 m:speed=650 m:altitude=12300' | nc 10.102.0.6 8081
```

This will insert {value} for metric {metric} generated by entity {entity} with the current time using nc (netcat) utility.

### Sending multiple commands

```
telnet atsd_server 8081
```

```
echo -e series e:DL1866 m:speed=650 m:altitude=12300\\nseries e:DL1867 m:speed=500 m:altitude=10000 | nc 127.0.0.1 8081
```

> In this example we are demonstrating how to send multiple commands in one line by separating them with end of line symbol.

Establish a connection to the database using telnet, netcat or any other program such as Java:Socket:OutputStream:

Once connection is established, write multiple commands, one command per line, and close the connection.
The commands are processed as they're received by the server, without buffering.
Client can submit commands of different types during the same session.

Trailing EOL is not required.

Use `-e` flag in echo commands to enable interpretation of backslash escapes.

<aside class="notice">
A duplicate series insert with the same key and timestamp will override the previously stored value. If duplicate inserts are submitted at approximately the same time, there is no guarantee that they will be processed in the order they were received.
</aside>

<aside class="notice">
The server will break the connection if it receives an unknown or malformed command.
</aside>

### Encryption

Telnet traffic can be tunneled over SSH if required: [Read Axibase guide on SSH Tunneling] (http://axibase.com/products/axibase-time-series-database/writing-data/nmon/ssh-tunneling/).

### Fields

* Each command starts with command name such as `series` and a list of fields each identified with a prefix followed by colon symbol.
* Fields such as tag or key start with prefix, colon symbol followed by key=value.
* The order of fields is not important.
* If field value contains white space it needs to be enclosed in double quotes.
* Entity and metric names will be automatically created if they're not existent provided they meet naming requirements.
* Tag and key names are case-insensitive. Values are case-sensitive and will be stored as submitted.
* Entity, metric and tag names as well as property type and key names must not contain the following characters: space, quote, double quote. When inserted via CSV upload or HTTP API, these characters are converted to underscore. Multiple underscores are collapsed into one underscore character.
* Double quotes must be screened, for example: `\"Ubuntu 14.04\"`

> Request

```
echo debug property e:axibase ms:1438178237215 t:collectd-atsd v:host=axibase v:OS_Version=\"Ubuntu 14.04\" | nc atsd_server 9081
```

### Time

Some commands contain a timestamp field `s:` which should be specified in UNIX seconds by default.
The timestamp field encodes the time of sample or event as determined by the source.
An alternative prefix can be used to submit time in a different format.

|**Field**|**Description**|
|---|---|---|
|s|UNIX seconds|
|ms|UNIX milliseconds|
|d|ISO 8601 date, yyyy-MM-dd'T'HH:mm:ss.SSSZ |

<aside class="success">
If timestamp field in seconds or milliseconds is less than or equal 0, or if it's empty in case of d: prefix, the time is set to server's current time.
If timestamp field is not specified, time is set to current server time.
</aside>

### Command Length

The server enforces the following maximum length constraints to command lines. 
The client is advised to split a command that is too long into multiple commands.

| **Command** | **Maximum Length** |
|---|---|---|
| series        | 128*1024  |
| property        | 128*1024  |
| message        | 128*1024  |
| other (first line)       | 1024  |

### Maximum Records

|Type| Max Id|
|-------|---------|
|metric| 65535|
|entity| 16777215|
|tag_key| 65535|
|tag_value| 16777215|
|message_type| 65535|
|message_source| 65535|

### Entity Names

<aside class="notice">
Entity, metric and tag names as well as property type and key names must not contain the following characters: space, quote, double quote. When inserted via CSV upload or HTTP API, these characters are converted to underscore. Multiple underscores are collapsed into one underscore character.
</aside>

### Debugging

By the default the server doesn't respond to the client when processing series, property and message commands.
The client may include `debug` field at the start of the line (as the first word) which instructs the server to respond with `ok` for each processed command.

