## Overview

Network commands provide a simple interface for inserting time series data, properties, and messages into Axibase Time-Series Database (ATSD) server.

You can use telnet, netcat or any programming language that lets you connect to remote systems via TCP/IP to send data into ATSD.

### Sending a single command

```
echo series e:{entity} m:{metric}={value} | nc atsd_server 8081
```

> Request

```java
echo series e:DL1866 m:speed=650 m:altitude=12300 | nc atsd_server 8081
```

This will insert {value} for metric {metric} generated by entity {entity} with the current time using nc (netcat) utility.

### Sending multiple commands

```
telnet atsd_server 8081
```

Establish a connection to the database using telnet, netcat or any other program such as Java:Socket:OutputStream:

Once connection is established, write multiple commands, one command per line, and close the connection.
The commands are processed as they're received by the server, without buffering.
Client can submit commands of different types during the same session.

<aside class="notice">
The server will break the connection if it receives an unknown or malformed command.
</aside>

### Authentication

```
echo series a:API-NxO2jUBBoD21wRqV  e:DL1866 m:speed=650 m:altitude=12300 | nc atsd_server 8081
```

Authentication is performed by including an `a:<api_key>` field as part of the command.

> For authenticating a session when sending multiple commands send a **session** command.

```
session a:API-NxO2jUBBoD21wRqV
... send commands without API field ...
```

### Encryption

Telnet traffic can be tunneled over SSH if required: [Read Axibase guide on SSH Tunneling] (http://axibase.com/products/axibase-time-series-database/writing-data/nmon/ssh-tunneling/).

### Fields

* Each command starts with command name such as `series` and a list of fields each identified with a prefix followed by colon symbol.
* Fields such as tag or key start with prefix, colon symbol followed by key=value.
* The order of fields is not important.
* If field value contains white space it needs to be enclosed in double quotes.
* Entity and metric names will be automatically created if they're not existent provided they meet naming requirements.
* Tag and key names are case-insensitive. Values are case-sensitive and will be stored as submitted.
* Entity, metric and tag names must not contain the following characters: space, quote, double quote.

### Time

Some commands contain a timestamp field `s:` which should be specified in UNIX seconds by default.
The timestamp field encodes the time of sample or event as determined by the source.
An alternative prefix can be used to submit time in a different format.

|**Field**|**Description**|
|---|---|---|
|s|UNIX seconds|
|ms|UNIX milliseconds|
|d|ISO 8601 date, yyyy-MM-dd'T'HH:mm:ss.SSSZ |

<aside class="success">
If timestamp field in seconds or milliseconds is less than or equal 0, or if it's empty in case of d: prefix, the time is set to server's current time.
If timestamp field is not specified, time is set to current server time.
</aside>

### Command Length

The server enforces the following maximum length constraints to command lines. 
The client is advised to split a command that is too long into multiple commands.

| **Command** | **Maximum Length** |
|---|---|---|
| series        | 32*1024  |
| property        | 64*1024  |
| message        | 32*1024  |
| other (first line)       | 1024  |

### Debugging

By the default the server doesn't respond to the client when processing series, property and message commands.
The client may include `debug` field at the start of the line (as the first word) which instructs the server to respond with `ok` for each processed command.
